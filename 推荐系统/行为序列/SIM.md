DIN模型的缺点
·注意力层的计算量正比于n(用户行为序列的长度)
·只能记录最近几百个物品，否则计算量太大
·缺点:关注短期兴趣，遗忘长期兴趣。


如何改进DIN?
目标:保留用户长期行为序列(n很大)，而且计算量不会过大。
改进 DIN:
·DIN对LastN向量做加权平均，权重是相似度。
如果某LastN物品与候选物品差异很大，则权重接近零。
快速排除掉与候选物品无关的LastN物品，降低注意力层的计算量。



SIM模型
保留用户长期行为记录，n的大小可以是几千。
·对于每个候选物品，在用户 LastN记录中做快速查找，找到k个相似物品。
把LastN变成 TopK，然后输入到注意力层
SIM 模型减小计算量(从n降到k)


第一步:查找
方法一:Hard Search
根据候选物品的类目，保留LastN物品中类目相同的。
简单，快速，无需训练。
方法二:Soft Search
·把物品做cmbcdding，变成向量。
把候选物品向量作为query，做k近邻查找，保留LastN物品中最接近的k个。
效果更好，编程实现更复杂。

第二步:注意力机制
trick：使用时间信息
·用户与某个LastN物品的交互时刻距今为8。
·对δ做离散化，再做embedding，变成向量d把两个向量做 concatenation，表征一个LastN物品。
·向量x是物品 emmbedding。
·向量d是时间的 embedding。


为什么 SIM 使用时间信息?
·DIN的序列短，记录用户近期行为。
·SIM的序列长，记录用户长期行为。
·时间越久远，重要性越低。



结论
长序列(长期兴趣)优于短序列(近期兴趣)
·注意力机制优于简单平均。
·Soft search 还是hard search?取决于工程基建。
·使用时间信息有提升。